/*Universidad del Valle de Guatemala 
/*Julio Roberto Pérez Díaz 221023
/*Electrónica Digital 2
#include <Arduino.h>

#define pot1 34  // Pin analógico para el potenciómetro 1
#define pot2 35  // Pin analógico para el potenciómetro 2

void setup() {
  Serial2.begin(115200);
//Iniciar el Serial para mostrar informacion en el monitor
  Serial.begin(115200);
  pinMode (pot1, INPUT);
  pinMode(pot2, INPUT);
}
void loop() {
  if (Serial2.available() > 0) {
    int request = Serial2.read();  // Leer un solo byte enviado por el STM32
    
    Serial.print("Request recibido: ");
    Serial.println(request);
    
    uint8_t response = 0;
    
    if (request == 1) {
      int potValue = analogRead(pot1);
      Serial.print("Valor potenciómetro 1: ");
      Serial.println(potValue); // Imprimir el valor leído
      //Hacer un mapeo del voltaje leído para tener valores de 0 - 15
      response = map(potValue, 0, 4095, 0, 15);
    } else if (request == 2) {
      int potValue = analogRead(pot2);
      Serial.print("Valor potenciómetro 2: ");
      Serial.println(potValue); // Imprimir el valor leído
      //Hacer un mapeo del voltaje leído para tener valores de 0-15
      response = map(potValue, 0, 4095, 0, 15);
    }
    
    Serial2.write(response);  // Enviar la respuesta al STM32
    //Imprimir en el monitor los valores como guía de que se envió al STM32
    Serial.print("Response enviado: ");
    Serial.println(response);
  }
}
